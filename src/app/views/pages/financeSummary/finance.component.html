<div class="container-fluid">
  <!-- Overall Finance Summary -->
  <div class="card border-0 shadow-lg rounded-4 overflow-hidden mb-4">
    <div class="card-header bg-primary d-flex justify-content-between align-items-center py-3">
      <h4 class="mb-0 fw-bold text-white">
        <i class="bi bi-wallet2 me-2"></i>Overall Finance Summary
      </h4>
    </div>
    <div class="card-body p-4">
      <div *ngIf="loadingSummary" class="text-center my-5 py-5">
        <div class="spinner-grow text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
      <div *ngIf="!loadingSummary && overallSummary" class="row">
        <div class="col-md-3">
          <div class="card bg-light p-3">
            <h6>Total Collections</h6>
            <p class="fs-5 fw-bold">{{formatCurrency(overallSummary.data.summary.totalCollections)}}</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card bg-light p-3">
            <h6>Total Expenses</h6>
            <p class="fs-5 fw-bold">{{formatCurrency(overallSummary.data.summary.totalExpenses)}}</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card bg-light p-3">
            <h6>Total Balance</h6>
            <p class="fs-5 fw-bold">{{formatCurrency(overallSummary.data.summary.totalBalance)}}</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card bg-light p-3">
            <h6>Total Chapters</h6>
            <p class="fs-5 fw-bold">{{overallSummary.data.summary.totalChapters}}</p>
          </div>
        </div>
      </div>
      <div *ngIf="!loadingSummary && overallSummary" class="mt-4">
        <h5>Chapter-Wise Breakdown</h5>
        <div class="table-responsive">
          <table class="table table-hover align-middle mb-0">
            <thead class="bg-light">
              <tr>
                <th class="ps-4 py-3">Chapter</th>
                <th class="py-3">Collections</th>
                <th class="py-3">Expenses</th>
                <th class="py-3">Balance</th>
                <th class="py-3">Last Updated</th>
                <th class="py-3">Last Updated By</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let chapter of overallSummary.data.chapterWiseBreakdown" class="border-bottom">
                <td class="ps-4 py-3">{{chapter.chapter}}</td>
                <td class="py-3">{{formatCurrency(chapter.collections)}}</td>
                <td class="py-3">{{formatCurrency(chapter.expenses)}}</td>
                <td class="py-3">{{formatCurrency(chapter.balance)}}</td>
                <td class="py-3">{{chapter.lastUpdated}}</td>
                <td class="py-3">{{chapter.lastUpdatedBy.name}} ({{chapter.lastUpdatedBy.email}})</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  